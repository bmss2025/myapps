const _0x201efd=_0x31bf;function _0xe4e9(){const _0x5c3d7c=['bringToFront','addEventListener','12316vbhvMw','type','off','max','getCurrentTime','length','latLng','click','12TLxOWt','getLatLngs','position','Route\x20reversed\x20successfully.','custom-marker\x20end-icon','<div\x20class=\x22marker-circle\x20end\x22>E</div>','fitBounds','forEach','29274330bweFBj','custom-marker\x20start-icon','<div\x20class=\x22marker-circle\x20start\x22>S</div>','endMarker','time','polyline','removeLayer','81onrqCn','lng','push','marker','divIcon','691715QxPWhM','circleMarker','geometry','5200008XaxIwG','getBounds','2669989NetMcX','features','601218IwssdS','warn','lat','11Iadscu','red','addTo','coordinates','1147544qeyzkH','Could\x20not\x20reverse\x20geometry\x20in\x20GeoJSON:','LineString','startMarker','log','18bzIuep','blue','reverse','sort','getElementById','Load\x20a\x20polyline\x20first.','distance'];_0xe4e9=function(){return _0x5c3d7c;};return _0xe4e9();}(function(_0xb60dbd,_0x2fee54){const _0xb7246f=_0x31bf,_0x5cc79b=_0xb60dbd();while(!![]){try{const _0x261212=parseInt(_0xb7246f(0xb7))/0x1*(-parseInt(_0xb7246f(0xaf))/0x2)+-parseInt(_0xb7246f(0xd2))/0x3+parseInt(_0xb7246f(0xce))/0x4+parseInt(_0xb7246f(0xcb))/0x5+-parseInt(_0xb7246f(0xa6))/0x6*(-parseInt(_0xb7246f(0xd0))/0x7)+-parseInt(_0xb7246f(0xa1))/0x8*(-parseInt(_0xb7246f(0xc6))/0x9)+parseInt(_0xb7246f(0xbf))/0xa*(-parseInt(_0xb7246f(0xd5))/0xb);if(_0x261212===_0x2fee54)break;else _0x5cc79b['push'](_0x5cc79b['shift']());}catch(_0x53afe9){_0x5cc79b['push'](_0x5cc79b['shift']());}}}(_0xe4e9,0xa4086));function attachPolylineClick(){const _0x4786e7=_0x31bf;polyline&&(polyline[_0x4786e7(0xb1)](_0x4786e7(0xb6)),polyline['on']('click',_0x49b424=>{const _0xc76254=_0x4786e7;if(!player)return;let _0x1355e6=_0x49b424['latlng'],_0xe7175e=polyline['getLatLngs'](),_0x855891=_0xe7175e[0x0],_0x2f0a9c=0x1/0x0;for(let _0x296406=0x0;_0x296406<_0xe7175e[_0xc76254(0xb4)]-0x1;_0x296406++){let _0x514e94=_0xe7175e[_0x296406],_0x50e25b=_0xe7175e[_0x296406+0x1],_0x1bbdb7=getClosestPointOnSegment(_0x514e94,_0x50e25b,_0x1355e6),_0x391828=map[_0xc76254(0xac)](_0x1355e6,_0x1bbdb7);_0x391828<_0x2f0a9c&&(_0x2f0a9c=_0x391828,_0x855891=_0x1bbdb7);}let _0xcb899d=player?.['getCurrentTime']()||0x0;linkedPoints['push']({'time':_0xcb899d,'position':[_0x855891[_0xc76254(0xd4)],_0x855891[_0xc76254(0xc7)]]}),linkedPoints[_0xc76254(0xa9)]((_0x1effd7,_0xf3e949)=>_0x1effd7[_0xc76254(0xc3)]-_0xf3e949[_0xc76254(0xc3)]),L[_0xc76254(0xcc)](_0x855891,{'color':_0xc76254(0xd6),'radius':0x4})[_0xc76254(0x9f)](map);}));}function _0x31bf(_0x32f983,_0x4e0b91){const _0xe4e9ee=_0xe4e9();return _0x31bf=function(_0x31bfe2,_0x1d32e4){_0x31bfe2=_0x31bfe2-0x9f;let _0xe88d3f=_0xe4e9ee[_0x31bfe2];return _0xe88d3f;},_0x31bf(_0x32f983,_0x4e0b91);}function getClosestPointOnSegment(_0x4b2566,_0x3bb1c3,_0x11a006){const _0x452caf=_0x31bf;let _0x462cd1=_0x4b2566[_0x452caf(0xc7)],_0x57f3ef=_0x4b2566['lat'],_0x2a113f=_0x3bb1c3[_0x452caf(0xc7)],_0x481769=_0x3bb1c3['lat'],_0x268af5=_0x11a006[_0x452caf(0xc7)],_0x17c46f=_0x11a006['lat'],_0x50c57c=_0x2a113f-_0x462cd1,_0x537453=_0x481769-_0x57f3ef,_0x25dd40=_0x50c57c*_0x50c57c+_0x537453*_0x537453,_0x22f533=Math[_0x452caf(0xb2)](0x0,Math['min'](0x1,0x0===_0x25dd40?0x0:((_0x268af5-_0x462cd1)*_0x50c57c+(_0x17c46f-_0x57f3ef)*_0x537453)/_0x25dd40));return L[_0x452caf(0xb5)](_0x57f3ef+_0x537453*_0x22f533,_0x462cd1+_0x50c57c*_0x22f533);}function getPositionAtTime(_0x34d11f){const _0x184cef=_0x31bf;if(!polyline)return[0x0,0x0];let _0x4f2968=polyline['getLatLngs']();if(0x0===linkedPoints[_0x184cef(0xb4)])return[_0x4f2968[0x0][_0x184cef(0xd4)],_0x4f2968[0x0][_0x184cef(0xc7)]];for(let _0x3d61a1=0x0;_0x3d61a1<linkedPoints[_0x184cef(0xb4)]-0x1;_0x3d61a1++)if(_0x34d11f>=linkedPoints[_0x3d61a1][_0x184cef(0xc3)]&&_0x34d11f<=linkedPoints[_0x3d61a1+0x1][_0x184cef(0xc3)]){let _0x52be38=(_0x34d11f-linkedPoints[_0x3d61a1][_0x184cef(0xc3)])/(linkedPoints[_0x3d61a1+0x1][_0x184cef(0xc3)]-linkedPoints[_0x3d61a1][_0x184cef(0xc3)]),[_0x465291,_0x5dbba7]=linkedPoints[_0x3d61a1][_0x184cef(0xb9)],[_0x2b639d,_0x4edf82]=linkedPoints[_0x3d61a1+0x1][_0x184cef(0xb9)];return[_0x465291+(_0x2b639d-_0x465291)*_0x52be38,_0x5dbba7+(_0x4edf82-_0x5dbba7)*_0x52be38];}return linkedPoints[linkedPoints[_0x184cef(0xb4)]-0x1][_0x184cef(0xb9)];}document[_0x201efd(0xaa)]('reverseRouteBtn')[_0x201efd(0xae)](_0x201efd(0xb6),()=>{const _0x154043=_0x201efd;if(!polyline)return alert('Load\x20a\x20polyline\x20first!');let _0x259a4b=polyline[_0x154043(0xb8)]()['slice']()[_0x154043(0xa8)]();polyline&&map[_0x154043(0xc5)](polyline),window['startMarker']&&map[_0x154043(0xc5)](startMarker),window['endMarker']&&map[_0x154043(0xc5)](endMarker),polyline=L[_0x154043(0xc4)](_0x259a4b,{'color':_0x154043(0xa7)})[_0x154043(0x9f)](map),map[_0x154043(0xbd)](polyline[_0x154043(0xcf)]());let _0x4dec94=L['divIcon']({'className':_0x154043(0xc0),'html':_0x154043(0xc1),'iconSize':[0x14,0x14],'iconAnchor':[0xa,0xa]}),_0x43fc11=L[_0x154043(0xca)]({'className':_0x154043(0xbb),'html':_0x154043(0xbc),'iconSize':[0x14,0x14],'iconAnchor':[0xa,0xa]});window[_0x154043(0xa4)]=L[_0x154043(0xc9)](_0x259a4b[0x0],{'icon':_0x4dec94})[_0x154043(0x9f)](map),window[_0x154043(0xc2)]=L[_0x154043(0xc9)](_0x259a4b[_0x259a4b[_0x154043(0xb4)]-0x1],{'icon':_0x43fc11})[_0x154043(0x9f)](map),window['rideMarker']?rideMarker['setLatLng'](_0x259a4b[0x0]):rideMarker=L[_0x154043(0xc9)](_0x259a4b[0x0],{'draggable':!0x0})[_0x154043(0x9f)](map),rideMarker[_0x154043(0xad)]();try{loadedGeoJSON&&('FeatureCollection'===loadedGeoJSON[_0x154043(0xb0)]?loadedGeoJSON[_0x154043(0xd1)][_0x154043(0xbe)](_0x272759=>{const _0x135e7b=_0x154043;_0x272759[_0x135e7b(0xcd)]?.[_0x135e7b(0xb0)]===_0x135e7b(0xa3)&&_0x272759[_0x135e7b(0xcd)][_0x135e7b(0xa0)][_0x135e7b(0xa8)]();}):loadedGeoJSON['geometry']?.[_0x154043(0xb0)]===_0x154043(0xa3)&&loadedGeoJSON[_0x154043(0xcd)][_0x154043(0xa0)][_0x154043(0xa8)]());}catch(_0x1bd6cc){console[_0x154043(0xd3)](_0x154043(0xa2),_0x1bd6cc);}console[_0x154043(0xa5)](_0x154043(0xba));}),document[_0x201efd(0xaa)]('addLandmark')[_0x201efd(0xae)](_0x201efd(0xb6),()=>{const _0x1d6061=_0x201efd;if(!polyline)return alert(_0x1d6061(0xab));if(!player)return alert('Load\x20a\x20YouTube\x20video\x20first.');let _0x314631=player[_0x1d6061(0xb3)](),_0x501a1b=getPositionAtTime(_0x314631),_0x5f2512=polyline[_0x1d6061(0xb8)](),_0x1bdb71=_0x5f2512[0x0],_0xebe49a=0x1/0x0;for(let _0xa36142=0x0;_0xa36142<_0x5f2512[_0x1d6061(0xb4)]-0x1;_0xa36142++){let _0x243b71=_0x5f2512[_0xa36142],_0x21a309=_0x5f2512[_0xa36142+0x1],_0x308f5b=getClosestPointOnSegment(_0x243b71,_0x21a309,L['latLng'](_0x501a1b[0x0],_0x501a1b[0x1])),_0x578bff=map[_0x1d6061(0xac)](L[_0x1d6061(0xb5)](_0x501a1b[0x0],_0x501a1b[0x1]),_0x308f5b);_0x578bff<_0xebe49a&&(_0xebe49a=_0x578bff,_0x1bdb71=_0x308f5b);}let _0x2d4974=prompt('Enter\x20landmark\x20description:');if(!_0x2d4974)return;let _0x5b5410={'time':_0x314631,'lat':_0x1bdb71[_0x1d6061(0xd4)],'lon':_0x1bdb71['lng'],'description':_0x2d4974};landmarks[_0x1d6061(0xc8)](_0x5b5410),landmarks[_0x1d6061(0xa9)]((_0x4549bd,_0x552f2f)=>_0x4549bd[_0x1d6061(0xc3)]-_0x552f2f[_0x1d6061(0xc3)]),rebuildLandmarks();});