const _0x20d3c7=_0x1976;(function(_0x3a2527,_0x59eba3){const _0x44adcf=_0x1976,_0x5cf5c5=_0x3a2527();while(!![]){try{const _0xa25a06=parseInt(_0x44adcf(0x184))/0x1+parseInt(_0x44adcf(0x16a))/0x2*(-parseInt(_0x44adcf(0x171))/0x3)+-parseInt(_0x44adcf(0x1a3))/0x4*(-parseInt(_0x44adcf(0x195))/0x5)+-parseInt(_0x44adcf(0x19e))/0x6*(-parseInt(_0x44adcf(0x185))/0x7)+parseInt(_0x44adcf(0x169))/0x8+parseInt(_0x44adcf(0x19f))/0x9+-parseInt(_0x44adcf(0x172))/0xa;if(_0xa25a06===_0x59eba3)break;else _0x5cf5c5['push'](_0x5cf5c5['shift']());}catch(_0x1ebf91){_0x5cf5c5['push'](_0x5cf5c5['shift']());}}}(_0xa80b,0xda416));let player,map,marker,routeCoords=[],cumulativeDist=[],timePoints=[],landmarks=[],loadedData=null,videoId=null,autoPanEnabled=!0x0;function loadYouTubePlayer(_0x374608){const _0x53d271=_0x1976;player&&player[_0x53d271(0x17a)](),player=new YT[(_0x53d271(0x19a))](_0x53d271(0x16c),{'width':_0x53d271(0x194),'height':_0x53d271(0x194),'videoId':_0x374608,'playerVars':{'controls':0x1},'events':{'onReady':onPlayerReady}});}function onPlayerReady(_0x550324){const _0x57997a=_0x1976;setupVisualization();try{updateLabel(t);}catch(_0x5ab0ee){console[_0x57997a(0x19d)]('Label\x20update\x20failed:',_0x5ab0ee);}requestAnimationFrame(syncMarker),player[_0x57997a(0x16b)]('onStateChange',_0x14b0a7=>{const _0x4eed2e=_0x57997a;_0x14b0a7[_0x4eed2e(0x189)]===YT[_0x4eed2e(0x198)][_0x4eed2e(0x170)]?autoPanEnabled=!0x0:_0x14b0a7[_0x4eed2e(0x189)]===YT[_0x4eed2e(0x198)]['PAUSED']&&(autoPanEnabled=!0x1);});}function initMap(){const _0x5f5ab1=_0x1976;map=L[_0x5f5ab1(0x1ac)](_0x5f5ab1(0x1ac))[_0x5f5ab1(0x1a5)]([22.646,88.433],0xd),L[_0x5f5ab1(0x174)](_0x5f5ab1(0x1ab),{'maxZoom':0x13})[_0x5f5ab1(0x16d)](map);}function loadData(_0x3049e4){const _0x55c389=_0x1976;let _0x180b41=_0x3049e4[_0x55c389(0x18e)][_0x55c389(0x196)][0x0][_0x55c389(0x199)]['coordinates'];routeCoords=_0x180b41[_0x55c389(0x1ac)](_0x26c64b=>[_0x26c64b[0x1],_0x26c64b[0x0]]),cumulativeDist=[0x0];for(let _0x493032=0x1;_0x493032<routeCoords[_0x55c389(0x193)];_0x493032++){let _0x2b0bb7=map[_0x55c389(0x17f)](routeCoords[_0x493032-0x1],routeCoords[_0x493032]);cumulativeDist[_0x55c389(0x17b)](cumulativeDist[_0x493032-0x1]+_0x2b0bb7);}timePoints=_0x3049e4[_0x55c389(0x18b)]['map'](_0x2d792c=>({'time':_0x2d792c['time'],'lat':_0x2d792c[_0x55c389(0x187)][0x0],'lon':_0x2d792c['position'][0x1],'dist':findNearestDistanceOnRoute(_0x2d792c['position'])})),landmarks=_0x3049e4[_0x55c389(0x1b0)]||[];}function findNearestDistanceOnRoute(_0x4a12b6){const _0x4e7612=_0x1976;let [_0x272fe5,_0x588f5b]=_0x4a12b6,_0x3368bb=0x1/0x0,_0x2f6183=0x0;for(let _0x55a815=0x1;_0x55a815<routeCoords[_0x4e7612(0x193)];_0x55a815++){let _0x502d03=routeCoords[_0x55a815-0x1],_0x5af7fc=routeCoords[_0x55a815],_0x16707b=pointToSegmentDistance([_0x272fe5,_0x588f5b],_0x502d03,_0x5af7fc);_0x16707b[_0x4e7612(0x1a7)]<_0x3368bb&&(_0x3368bb=_0x16707b[_0x4e7612(0x1a7)],_0x2f6183=cumulativeDist[_0x55a815-0x1]+_0x16707b[_0x4e7612(0x1a6)]*(cumulativeDist[_0x55a815]-cumulativeDist[_0x55a815-0x1]));}return _0x2f6183;}function findNearestPointOnRoute(_0x45d76c){const _0x2ebcae=_0x1976;let [_0x103457,_0x5d7831]=_0x45d76c,_0x3c1f59=0x1/0x0,_0x300886=routeCoords[0x0],_0x5bc585=0x0;for(let _0x2c03b1=0x1;_0x2c03b1<routeCoords[_0x2ebcae(0x193)];_0x2c03b1++){let _0x3de5e4=routeCoords[_0x2c03b1-0x1],_0x503d78=routeCoords[_0x2c03b1],_0x1f562b=pointToSegmentDistance([_0x103457,_0x5d7831],_0x3de5e4,_0x503d78);if(_0x1f562b[_0x2ebcae(0x1a7)]<_0x3c1f59){_0x3c1f59=_0x1f562b[_0x2ebcae(0x1a7)];let _0x4ea133=_0x3de5e4[0x0]+_0x1f562b['frac']*(_0x503d78[0x0]-_0x3de5e4[0x0]),_0xc5e6ff=_0x3de5e4[0x1]+_0x1f562b[_0x2ebcae(0x1a6)]*(_0x503d78[0x1]-_0x3de5e4[0x1]);_0x300886=[_0x4ea133,_0xc5e6ff],_0x5bc585=cumulativeDist[_0x2c03b1-0x1]+_0x1f562b['frac']*(cumulativeDist[_0x2c03b1]-cumulativeDist[_0x2c03b1-0x1]);}}return{'point':_0x300886,'dist':_0x5bc585};}function pointToSegmentDistance(_0x42abbf,_0x494713,_0x545624){const _0x1f2aa9=_0x1976;let _0x3b9cb4=_0x42abbf[0x1],_0x4b4aa8=_0x42abbf[0x0],_0x10371b=_0x494713[0x1],_0x54bae4=_0x494713[0x0],_0x288546=_0x545624[0x1],_0xcc5163=_0x545624[0x0],_0x575805=_0x288546-_0x10371b,_0x34097a=_0xcc5163-_0x54bae4,_0x1676a3=Math[_0x1f2aa9(0x1a2)](0x0,Math[_0x1f2aa9(0x1a9)](0x1,((_0x3b9cb4-_0x10371b)*_0x575805+(_0x4b4aa8-_0x54bae4)*_0x34097a)/(_0x575805*_0x575805+_0x34097a*_0x34097a)));return{'dist':0x1b2d8*Math['sqrt']((_0x3b9cb4-(_0x10371b+_0x1676a3*_0x575805))**0x2+(_0x4b4aa8-(_0x54bae4+_0x1676a3*_0x34097a))**0x2),'frac':_0x1676a3};}function getPositionAtDistance(_0x507ac7){const _0x2576c2=_0x1976;if(routeCoords[_0x2576c2(0x193)]<0x2)return routeCoords[0x0];let _0x2a5a18=0x1;for(;_0x2a5a18<cumulativeDist[_0x2576c2(0x193)]&&cumulativeDist[_0x2a5a18]<_0x507ac7;)_0x2a5a18++;if(_0x2a5a18>=cumulativeDist[_0x2576c2(0x193)])return routeCoords['at'](-0x1);let _0x259df9=routeCoords[_0x2a5a18-0x1],_0x5d3074=routeCoords[_0x2a5a18],_0x20b781=cumulativeDist[_0x2a5a18]-cumulativeDist[_0x2a5a18-0x1],_0x386260=(_0x507ac7-cumulativeDist[_0x2a5a18-0x1])/_0x20b781;return[_0x259df9[0x0]+_0x386260*(_0x5d3074[0x0]-_0x259df9[0x0]),_0x259df9[0x1]+_0x386260*(_0x5d3074[0x1]-_0x259df9[0x1])];}function distanceToTime(_0x1bac40){const _0x5ec2e9=_0x1976;if(timePoints[_0x5ec2e9(0x193)]<0x2)return 0x0;for(let _0x1d8d18=0x1;_0x1d8d18<timePoints['length'];_0x1d8d18++){let _0x17a01c=timePoints[_0x1d8d18-0x1],_0x15d1b3=timePoints[_0x1d8d18];if(_0x1bac40>=_0x17a01c[_0x5ec2e9(0x1a7)]&&_0x1bac40<=_0x15d1b3[_0x5ec2e9(0x1a7)]){let _0x3433fa=(_0x1bac40-_0x17a01c[_0x5ec2e9(0x1a7)])/(_0x15d1b3[_0x5ec2e9(0x1a7)]-_0x17a01c[_0x5ec2e9(0x1a7)]);return _0x17a01c['time']+_0x3433fa*(_0x15d1b3[_0x5ec2e9(0x178)]-_0x17a01c[_0x5ec2e9(0x178)]);}}return _0x1bac40<timePoints[0x0][_0x5ec2e9(0x1a7)]?timePoints[0x0]['time']:_0x1bac40>timePoints['at'](-0x1)['dist']?timePoints['at'](-0x1)[_0x5ec2e9(0x178)]:0x0;}function interpolateDistanceForTime(_0x4501cf){const _0x4825d6=_0x1976;if(timePoints[_0x4825d6(0x193)]<0x2)return 0x0;for(let _0x366c9a=0x1;_0x366c9a<timePoints[_0x4825d6(0x193)];_0x366c9a++){let _0x509433=timePoints[_0x366c9a-0x1],_0x52c98b=timePoints[_0x366c9a];if(_0x4501cf>=_0x509433['time']&&_0x4501cf<=_0x52c98b[_0x4825d6(0x178)]){let _0x2793f9=(_0x4501cf-_0x509433[_0x4825d6(0x178)])/(_0x52c98b[_0x4825d6(0x178)]-_0x509433['time']);return _0x509433['dist']+_0x2793f9*(_0x52c98b[_0x4825d6(0x1a7)]-_0x509433[_0x4825d6(0x1a7)]);}}return _0x4501cf<timePoints[0x0][_0x4825d6(0x178)]?timePoints[0x0]['dist']:_0x4501cf>timePoints['at'](-0x1)[_0x4825d6(0x178)]?timePoints['at'](-0x1)[_0x4825d6(0x1a7)]:0x0;}function _0x1976(_0x4bcdd1,_0x15ac87){const _0xa80b2f=_0xa80b();return _0x1976=function(_0x197668,_0x560394){_0x197668=_0x197668-0x169;let _0x154afc=_0xa80b2f[_0x197668];return _0x154afc;},_0x1976(_0x4bcdd1,_0x15ac87);}function setupVisualization(){const _0x25ad84=_0x1976;let _0x5ca25b=L[_0x25ad84(0x18c)]({'className':'','html':'<div\x20class=\x22car-marker\x22><i\x20class=\x22fa-solid\x20fa-car-side\x22></i></div>','iconSize':[0x1a,0x1a],'iconAnchor':[0xd,0xd]});marker=L['marker'](routeCoords[0x0],{'icon':_0x5ca25b,'draggable':!0x1})[_0x25ad84(0x16d)](map),map[_0x25ad84(0x1a5)](routeCoords[0x0],0xf),landmarks[_0x25ad84(0x173)](_0x1fc4e8=>{const _0x1a9574=_0x25ad84;L['circleMarker']([_0x1fc4e8['lat'],_0x1fc4e8[_0x1a9574(0x190)]],{'radius':0x4,'color':'red'})[_0x1a9574(0x16d)](map)['bindTooltip'](_0x1fc4e8['description']);});let _0x376bb4=L[_0x25ad84(0x1a1)](routeCoords,{'color':_0x25ad84(0x192),'weight':0x4})[_0x25ad84(0x16d)](map);_0x376bb4['on']('click',_0x11b0ff=>{const _0x422a2f=_0x25ad84;let _0x193342=findNearestPointOnRoute([_0x11b0ff['latlng'][_0x422a2f(0x181)],_0x11b0ff[_0x422a2f(0x18f)][_0x422a2f(0x17d)]]);marker['setLatLng'](_0x193342[_0x422a2f(0x188)]);let _0x23071d=distanceToTime(_0x193342['dist']);player[_0x422a2f(0x1a8)](_0x23071d,!0x0),player['playVideo']();});}function syncMarker(){const _0x3339e2=_0x1976;if(player&&marker&&routeCoords[_0x3339e2(0x193)]>0x0){let _0xace955=player[_0x3339e2(0x18a)](),_0x365732=interpolateDistanceForTime(_0xace955),_0x942c7a=getPositionAtDistance(_0x365732);marker[_0x3339e2(0x19b)](_0x942c7a),autoPanEnabled&&map['panTo'](_0x942c7a,{'animate':!0x0}),updateLabel(_0xace955);}requestAnimationFrame(syncMarker);}function _0xa80b(){const _0x121958=['destroy','push','innerText','lng','opacity','distance','getElementById','lat','change','abs','745749WajFBF','7urfDYO','#ccc','position','point','data','getCurrentTime','linkedPoints','divIcon','loadBtn','geojson','latlng','lon','files','red','length','100%','10iKZeFN','features','description','PlayerState','geometry','Player','setLatLng','remove','warn','3383364qpEaFZ','3579651UjDdxr','fileNameDisplay','polyline','max','332620AxnnmW','find','setView','frac','dist','seekTo','min','Please\x20select\x20a\x20JSON\x20file.','https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}','map','videoIdInput','name','trim','landmarks','labelDisplay','click','text','9682080MPsYEU','92kkPATT','addEventListener','player','addTo','style','#fff','PLAYING','9987CGdRdJ','20368440LBcput','forEach','tileLayer','No\x20file\x20selected','textContent','Please\x20enter\x20a\x20YouTube\x20video\x20ID.','time','color'];_0xa80b=function(){return _0x121958;};return _0xa80b();}document['getElementById'](_0x20d3c7(0x18d))['addEventListener'](_0x20d3c7(0x1b2),async()=>{const _0x5d80d1=_0x20d3c7;let _0x152d96=document[_0x5d80d1(0x180)]('jsonFileInput'),_0x21fc03=document[_0x5d80d1(0x180)](_0x5d80d1(0x1ad));if(!_0x152d96['files'][_0x5d80d1(0x193)])return alert(_0x5d80d1(0x1aa));if(!(videoId=_0x21fc03['value'][_0x5d80d1(0x1af)]()))return alert(_0x5d80d1(0x177));let _0x100921=_0x152d96['files'][0x0],_0x5787f8=await _0x100921[_0x5d80d1(0x1b3)]();loadedData=JSON['parse'](_0x5787f8),map&&map[_0x5d80d1(0x19c)](),routeCoords=[],cumulativeDist=[],timePoints=[],landmarks=[],initMap(),loadData(loadedData),loadYouTubePlayer(videoId);});const jsonInput=document[_0x20d3c7(0x180)]('jsonFileInput'),fileNameDisplay=document['getElementById'](_0x20d3c7(0x1a0));function updateLabel(_0xd28901){const _0x51d3b2=_0x20d3c7;let _0x4f2c41=document[_0x51d3b2(0x180)](_0x51d3b2(0x1b1));if(!_0x4f2c41)return;if(!landmarks||0x0===landmarks[_0x51d3b2(0x193)]){_0x4f2c41['style'][_0x51d3b2(0x17e)]=0x0;return;}let _0x407c46=_0xd28901-0x0,_0x5029ef=landmarks[_0x51d3b2(0x1a4)](_0x380736=>0x2>Math[_0x51d3b2(0x183)](_0x380736[_0x51d3b2(0x178)]-_0x407c46));_0x5029ef?(_0x4f2c41[_0x51d3b2(0x17c)]=_0x5029ef[_0x51d3b2(0x197)],_0x4f2c41[_0x51d3b2(0x16e)][_0x51d3b2(0x17e)]=0x1):_0x4f2c41[_0x51d3b2(0x16e)]['opacity']=0x0;}jsonInput[_0x20d3c7(0x16b)](_0x20d3c7(0x182),()=>{const _0x58edab=_0x20d3c7;jsonInput[_0x58edab(0x191)][_0x58edab(0x193)]>0x0?(fileNameDisplay[_0x58edab(0x176)]=jsonInput[_0x58edab(0x191)][0x0][_0x58edab(0x1ae)],fileNameDisplay[_0x58edab(0x16e)][_0x58edab(0x179)]=_0x58edab(0x16f)):(fileNameDisplay[_0x58edab(0x176)]=_0x58edab(0x175),fileNameDisplay['style']['color']=_0x58edab(0x186));});